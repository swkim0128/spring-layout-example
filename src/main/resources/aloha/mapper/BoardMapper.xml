<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="aloha.mapper.BoardMapper">

   <select id="list" resultType="Board">
      <![CDATA[
      SELECT  board_no,
            title,
            content,
            writer,
            reg_date
      FROM   board
      WHERE    board_no > 0
      ORDER BY board_no DESC,
             reg_date DESC
      ]]>
   </select>
   
   <insert id="create">
   		INSERT INTO board
   			(
   				title,
   				content,
   				writer,
   				file_path
   			)
   		VALUES
   			(
   				#{title},
   				#{content},
   				#{writer},
   				#{filePath}
   			)
   </insert>
   
   <select id="read" resultType="Board">
   		SELECT board_no,
   			title,
   			content,
   			writer,
   			file_path,
   			reg_date
   		FROM board
   		WHERE board_no=#{boardNo}
   </select>
   
   <update id="update">
   		UPDATE board
	   		SET title=#{title},
	   			content=#{content}
   		WHERE board_no=#{boardNo}
   </update>
   
   <delete id="delete">
   		DELETE FROM board
   		WHERE board_no=#{boardNo}
   </delete>
   
   <select id="search" resultType="Board">
   		<![CDATA[
   		SELECT board_no,
   			title,
   			content,
   			writer,
   			reg_date
   		FROM board
   		WHERE board_no > 0
   		]]>
   		<if test="title != null and title != ''">
   			AND title LIKE CONCAT('%', #{title}, '%')
   		</if>
   		<![CDATA[
   		ORDER BY board_no DESC,
   			reg_date DESC
   		]]>
   </select>
   
   <select id="getPicture" resultType="String">
		SELECT file_path
		FROM board
		WHERE board_no = #{boardNo}   
   </select>
</mapper>